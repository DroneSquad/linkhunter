/*!
 * LinkHunter - v1.0.0
 * Detect links that real users actually type.
 * https://github.com/Zhouzi/LinkHunter
 *
 * @author Gabin Aureche
 * @license MIT
 */

!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i);!function(e){e.LinkHunter=a["default"]}(window)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=r(o),l=n(3),s=r(l),f="[^\\s]+@[^\\s.]+\\.[-a-z]{2,10}",c="https?://(?:[a-z0-9]{1,255}\\.)+[a-z]{2,10}[^\\s]*",g="(?:[a-z0-9]{1,255}\\.)+[a-z]{2,10}[^.\\s\"'!?:,;]*",p="((?:"+f+")|(?:"+c+")|(?:"+g+"))",h=function(){function e(){i(this,e),this.regexps={email:new RegExp("^"+f+"$","i"),regularUrl:new RegExp("^"+c+"$","i"),userUrl:new RegExp("^"+g+"$","i"),link:new RegExp("^"+p+"$","i"),links:new RegExp(p,"gi")}}return a(e,[{key:"looksLikeAnEmail",value:function(e){return this.regexps.email.test(e)}},{key:"looksLikeALink",value:function(e){var t=void 0===arguments[1]?!1:arguments[1];return t&&this.looksLikeAnEmail(e)?!1:this.regexps.link.test(e)}},{key:"getLinks",value:function(e){var t=this,n=void 0===arguments[1]?!1:arguments[1],r=e.match(this.regexps.links)||[];return n&&!function(){var e=t;r=r.filter(function(t){return!e.looksLikeAnEmail(t)})}(),r.map(function(e){return new u["default"](e)})}},{key:"linky",value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n={ignoreEmail:!1,targetBlank:!1,protocol:"http://"};t=s["default"].merge(n,t);var r=t.targetBlank?'<a href="{{formatted}}" target="_blank">{{original}}</a>':'<a href="{{formatted}}">{{original}}</a>',i=this;return e.replace(i.regexps.links,function(e){return t.ignoreEmail&&i.looksLikeAnEmail(e)?e:(e=new u["default"](e,i.looksLikeAnEmail(e)),"email"==e.type?'<a href="mailto:'+e.original+'">'+e.original+"</a>":r.replace("{{formatted}}",e.withProtocol(t.protocol)).replace("{{original}}",e.original))})}}]),e}();t["default"]=h,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.original=t,this.type=r?"email":"url"}return r(e,[{key:"originalHasProtocol",value:function(){return/^https?:\/\//.test(this.original)}},{key:"withProtocol",value:function(){var e=void 0===arguments[0]?"http://":arguments[0];return"email"==this.type?this.original:this.originalHasProtocol()?this.original:e+this.original}},{key:"cleanUp",value:function(){var e=void 0===arguments[0]?!1:arguments[0],t=this.original;if(e){var n=t.lastIndexOf("?");n>=0&&(t=t.substr(0,n))}return t=t.replace(/^https?:\/\//,"").replace(/\/#?$/,"")}},{key:"shorten",value:function(t){if("email"==this.type)return this.original.substr(0,t);var n=this.original;return n.length<=t||(n=this.cleanUp()).length<=t?n:e.addEllipsis(n,t)}},{key:"beautify",value:function(){var e=void 0===arguments[0]?!0:arguments[0];if("email"==this.type)return this.original;var t=this.cleanUp(e);if(t.indexOf("/")<0)return t;var n=t.split("/");return n.length>2?n.shift()+"/.../"+n.pop():n.shift()+"/"+n.pop()}}],[{key:"addEllipsis",value:function(e){var t=void 0===arguments[1]?e.length:arguments[1],n=void 0===arguments[2]?"...":arguments[2];return function(){return e.substr(0,t-n.length)+n}()}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={merge:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},e.exports=t["default"]}]);