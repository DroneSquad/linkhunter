/*!
 * LinkHunter - v1.0.0
 * Detect links that real users actually type.
 * https://github.com/Zhouzi/LinkHunter
 *
 * @author Gabin Aureche
 * @license MIT
 */

!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),a=r(i);!function(t){t.LinkHunter=a["default"]}(window)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),o=r(u),l=function(){function t(){i(this,t);var e="((?:https?://)?[-a-zA-Z0-9:%_\\+~=?][-a-zA-Z0-9@:%._\\+~#=?]{0,255}\\.[a-z]{2,6}[-a-zA-Z0-9@:%._\\+~#=/&\\[\\]?]*)";this.regexps={linkStrict:new RegExp("^"+e+"$"),linkGlobal:new RegExp(e,"g")}}return a(t,[{key:"isLink",value:function(t){var e=void 0===arguments[1]?!0:arguments[1];return e&&t.indexOf("@")>=0?!1:"."==t.charAt(0)||"."==t.charAt(t.length-1)?!1:this.regexps.linkStrict.test(t)?/\.{2,}/g.test(t)?!1:!0:!1}},{key:"getLinks",value:function(t){var e=void 0===arguments[1]?!0:arguments[1],n=t.match(this.regexps.linkGlobal)||[],r=this;return n.filter(function(t){return r.isLink(t,e)}).map(function(t){return new o["default"](t)})}},{key:"linkify",value:function(t){var e=void 0===arguments[1]?{ignoreEmail:!1,targetBlank:!1}:arguments[1],n=e.targetBlank?'<a href="{{formatted}}" target="_blank">{{original}}</a>':'<a href="{{formatted}}">{{original}}</a>',r=this,i=void 0;return t.replace(r.regexps.linkGlobal,function(t){return r.isLink(t,e.ignoreEmail)?(i=new o["default"](t),"email"==i.type?'<a href="mailto:'+i.original+'">'+i.original+"</a>":n.replace("{{formatted}}",i.toFormatted()).replace("{{original}}",i.original)):t})}}]),t}();e["default"]=l,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.original=e,this.type=e.indexOf("@")>=0?"email":"url"}return r(t,[{key:"toFormatted",value:function(){var t=void 0===arguments[0]?"http://":arguments[0];return"email"==this.type?this.original:/^https?:\/\//.test(this.original)?this.original:t+this.original}},{key:"shorten",value:function(e){var n=void 0===arguments[1]?!0:arguments[1];if("email"==this.type)return this.original.substr(0,e);var r=this.original;if(r.length<e)return r;r=t.cleanUp(r);for(var i=r.split("/"),a=i.shift()+"/",u=i.pop(),o=0,l=void 0;o<i.length;o++){if(l=i[o],!((a+l+"/"+u).length<=e)){a+=".../";break}a+=l+"/"}var s=a+u;return n&&s.length>e&&(s=s.substr(0,e-3)+"..."),s}},{key:"beautify",value:function(){var e=void 0===arguments[0]?!1:arguments[0],n=t.cleanUp(this.original,e),r=n.split("/");return 1===r.length?n:r.length>2?r.shift()+"/.../"+r.pop():r.shift()+"/"+r.pop()}}],[{key:"cleanUp",value:function(t){var e=void 0===arguments[1]?!1:arguments[1];if(e){var n=t.lastIndexOf("?");n>=0&&(t=t.substr(0,n))}return t=t.replace(/^https?:\/\//,"").replace(/\/#?$/,"")}}]),t}();e["default"]=i,t.exports=e["default"]}]);